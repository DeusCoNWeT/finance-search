<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../finance-chart/finance-chart.html">
<link rel="import" href="../search-company/search-company.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../paper-styles/paper-styles.html">

<!--
An element providing a solution to no problem in particular.

Example:

    <finance-search></finance-search>

Example:

    <finance-search>
      <h2>Hello finance-search</h2>
    </finance-search>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="finance-search">
  <template>
      <style include="iron-flex iron-flex-alignment">
        :host {
          display: inline-block;
          box-sizing: border-box;
          width: var(--finance-search-width, 400px);
          height: var(--finance-search-width, auto);
          min-height: 250px;
          background-color:#3F51B5;
          border-radius: 2px;
          box-sizing: content-box;
          border: 1px solid #eceff1;
        }
        .container{
          margin:8px;
        }
        finance-chart {
          box-sizing: content-box;
          width: 100%;
          --finance-chart-front: {
            border:none;
            background:transparent;
            position:relative;
            margin: auto 0;
          }
        }
        /*finance-chart /deep/ .front {
          border:none;
        }*/
        search-company {
          --search-company-input: {
            height:40px;
            border:none;
            border-bottom:1px solid #dedede;
            outline: none;
            @apply(--shadow-elevation-2dp);
          }
        }
        .post {
          margin: 8px 15px;
          padding:8px 15px;
          background-color:#fefefe;
          border-radius:2px;
        }
    </style>
    <div class="vertical layout">
        <search-company symbol="{{company_symbol}}"></search-company>
        <div class="container">
            <template is="dom-if" if="{{company_symbol}}">
                <finance-chart symbol="[[company_symbol]]" current="{{company}}" historical="{{data}}" accuracy="10" on-finance-chart-ready="checkEmpty" start="2016-9-31">
                <template is="dom-if" if="{{emptyData}}">
                  <div class="horizontal layout center-center post">
                    <p>Utiliza la barra de busqueda para encontrar una empresa</p>
                  </div>
                </template>
            </template>
            <template is="dom-if" if="{{!company_symbol}}">
                <div class="horizontal layout center-center post">
                    <p>Utiliza la barra de busqueda para encontrar una empresa</p>
                </div>
            </template>
        </div>
    </div>

  </template>

  <script>
      Polymer({
          is: 'finance-search',

          properties: {
          },
          checkEmpty: function(){
            this.emptyData = this.data && this.data.length == 0;
          }
      });
  </script>
</dom-module>